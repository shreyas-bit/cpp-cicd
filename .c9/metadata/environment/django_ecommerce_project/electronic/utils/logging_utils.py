{"filter":false,"title":"logging_utils.py","tooltip":"/django_ecommerce_project/electronic/utils/logging_utils.py","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":0,"column":0},"end":{"row":42,"column":0},"action":"insert","lines":["# electronic/utils/logging_utils.py","","import logging","import boto3","import time","from logging.handlers import WatchedFileHandler","","# CloudWatch log group and stream","LOG_GROUP = 'django-logs'","LOG_STREAM = 'my-log-stream'","","# Boto3 client","cloudwatch_logs = boto3.client('logs', region_name='us-east-1')","","# Create a CloudWatch log stream if it doesn't exist","def create_log_stream():","    try:","        cloudwatch_logs.create_log_stream(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM","        )","    except cloudwatch_logs.exceptions.ResourceAlreadyExistsException:","        pass","","# Custom handler for logging to CloudWatch","class CloudWatchLogHandler(logging.Handler):","    def emit(self, record):","        log_entry = self.format(record)","        timestamp = int(time.time() * 1000)  # Timestamp in milliseconds","        cloudwatch_logs.put_log_events(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM,","            logEvents=[","                {","                    'timestamp': timestamp,","                    'message': log_entry","                }","            ]","        )","","# Run log stream creation at startup","create_log_stream()",""],"id":1}],[{"start":{"row":12,"column":51},"end":{"row":12,"column":62},"action":"remove","lines":["'us-east-1'"],"id":4},{"start":{"row":12,"column":51},"end":{"row":12,"column":75},"action":"insert","lines":["settings.AWS_REGION_NAME"]}],[{"start":{"row":4,"column":11},"end":{"row":5,"column":0},"action":"insert","lines":["",""],"id":8}],[{"start":{"row":5,"column":0},"end":{"row":5,"column":32},"action":"insert","lines":["from django.conf import settings"],"id":9}],[{"start":{"row":0,"column":0},"end":{"row":43,"column":0},"action":"remove","lines":["# electronic/utils/logging_utils.py","","import logging","import boto3","import time","from django.conf import settings","from logging.handlers import WatchedFileHandler","","# CloudWatch log group and stream","LOG_GROUP = 'django-logs'","LOG_STREAM = 'my-log-stream'","","# Boto3 client","cloudwatch_logs = boto3.client('logs', region_name=settings.AWS_REGION_NAME)","","# Create a CloudWatch log stream if it doesn't exist","def create_log_stream():","    try:","        cloudwatch_logs.create_log_stream(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM","        )","    except cloudwatch_logs.exceptions.ResourceAlreadyExistsException:","        pass","","# Custom handler for logging to CloudWatch","class CloudWatchLogHandler(logging.Handler):","    def emit(self, record):","        log_entry = self.format(record)","        timestamp = int(time.time() * 1000)  # Timestamp in milliseconds","        cloudwatch_logs.put_log_events(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM,","            logEvents=[","                {","                    'timestamp': timestamp,","                    'message': log_entry","                }","            ]","        )","","# Run log stream creation at startup","create_log_stream()",""],"id":10},{"start":{"row":0,"column":0},"end":{"row":40,"column":0},"action":"insert","lines":["# electronic/logging_utils.py","import logging","import boto3","from django.conf import settings","import time","","# CloudWatch log group and stream","LOG_GROUP = 'django-logs'","LOG_STREAM = 'my-log-stream'","","# Boto3 client","cloudwatch_logs = boto3.client('logs', region_name=settings.AWS_REGION_NAME)","","# Create a CloudWatch log stream if it doesn't exist","def create_log_stream():","    try:","        cloudwatch_logs.create_log_stream(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM","        )","    except cloudwatch_logs.exceptions.ResourceAlreadyExistsException:","        pass","","# Custom handler for logging to CloudWatch","class CloudWatchLogHandler(logging.Handler):","    def emit(self, record):","        log_entry = self.format(record)","        timestamp = int(time.time() * 1000)  # Timestamp in milliseconds","        cloudwatch_logs.put_log_events(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM,","            logEvents=[","                {","                    'timestamp': timestamp,","                    'message': log_entry","                }","            ]","        )","","# You no longer need to call create_log_stream() here, it will be done automatically",""]}],[{"start":{"row":0,"column":0},"end":{"row":40,"column":0},"action":"remove","lines":["# electronic/logging_utils.py","import logging","import boto3","from django.conf import settings","import time","","# CloudWatch log group and stream","LOG_GROUP = 'django-logs'","LOG_STREAM = 'my-log-stream'","","# Boto3 client","cloudwatch_logs = boto3.client('logs', region_name=settings.AWS_REGION_NAME)","","# Create a CloudWatch log stream if it doesn't exist","def create_log_stream():","    try:","        cloudwatch_logs.create_log_stream(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM","        )","    except cloudwatch_logs.exceptions.ResourceAlreadyExistsException:","        pass","","# Custom handler for logging to CloudWatch","class CloudWatchLogHandler(logging.Handler):","    def emit(self, record):","        log_entry = self.format(record)","        timestamp = int(time.time() * 1000)  # Timestamp in milliseconds","        cloudwatch_logs.put_log_events(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM,","            logEvents=[","                {","                    'timestamp': timestamp,","                    'message': log_entry","                }","            ]","        )","","# You no longer need to call create_log_stream() here, it will be done automatically",""],"id":11},{"start":{"row":0,"column":0},"end":{"row":42,"column":0},"action":"insert","lines":["# electronic/utils/logging_utils.py","","import logging","import boto3","import time","from logging.handlers import WatchedFileHandler","","# CloudWatch log group and stream","LOG_GROUP = 'django-logs'","LOG_STREAM = 'my-log-stream'","","# Boto3 client","cloudwatch_logs = boto3.client('logs', region_name='us-east-1')","","# Create a CloudWatch log stream if it doesn't exist","def create_log_stream():","    try:","        cloudwatch_logs.create_log_stream(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM","        )","    except cloudwatch_logs.exceptions.ResourceAlreadyExistsException:","        pass","","# Custom handler for logging to CloudWatch","class CloudWatchLogHandler(logging.Handler):","    def emit(self, record):","        log_entry = self.format(record)","        timestamp = int(time.time() * 1000)  # Timestamp in milliseconds","        cloudwatch_logs.put_log_events(","            logGroupName=LOG_GROUP,","            logStreamName=LOG_STREAM,","            logEvents=[","                {","                    'timestamp': timestamp,","                    'message': log_entry","                }","            ]","        )","","# Run log stream creation at startup","create_log_stream()",""]}],[{"start":{"row":12,"column":59},"end":{"row":12,"column":60},"action":"insert","lines":["."],"id":14}],[{"start":{"row":12,"column":51},"end":{"row":12,"column":52},"action":"insert","lines":["s"],"id":13},{"start":{"row":12,"column":52},"end":{"row":12,"column":53},"action":"insert","lines":["e"]},{"start":{"row":12,"column":53},"end":{"row":12,"column":54},"action":"insert","lines":["t"]},{"start":{"row":12,"column":54},"end":{"row":12,"column":55},"action":"insert","lines":["t"]},{"start":{"row":12,"column":55},"end":{"row":12,"column":56},"action":"insert","lines":["i"]},{"start":{"row":12,"column":56},"end":{"row":12,"column":57},"action":"insert","lines":["n"]},{"start":{"row":12,"column":57},"end":{"row":12,"column":58},"action":"insert","lines":["g"]},{"start":{"row":12,"column":58},"end":{"row":12,"column":59},"action":"insert","lines":["s"]}],[{"start":{"row":12,"column":51},"end":{"row":12,"column":62},"action":"remove","lines":["'us-east-1'"],"id":12},{"start":{"row":12,"column":51},"end":{"row":12,"column":66},"action":"insert","lines":["AWS_REGION_NAME"]}]]},"ace":{"folds":[],"scrolltop":199.80000000000004,"scrollleft":0,"selection":{"start":{"row":13,"column":0},"end":{"row":13,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1731521095739,"hash":"4ff930665bc4830c9693aeb81f11ae55a534ab35"}